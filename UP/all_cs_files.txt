using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Threading.Tasks;
using System.Windows;

namespace UP
{
    /// <summary>
    /// Логика взаимодействия для App.xaml
    /// </summary>
    public partial class App : Application
    {
    }
}
﻿using System.Windows;
using System.Windows.Controls;
using UP.Pages;
using UP.Services;

namespace UP
{
    public partial class MainWindow : Window
    {
        public static MainWindow mainWindow;

        public MainWindow()
        {
            InitializeComponent();
            mainWindow = this;

            // Настройка API
            AppData.ApiService = new ApiService("https://localhost:7197/api/");

            OpenPages(new LogInPage());
        }

        public void OpenPages(Page page)
        {
            frame.Navigate(page);

            if (page is FrameworkElement frameworkElement)
            {
                frameworkElement.HorizontalAlignment = HorizontalAlignment.Stretch;
                frameworkElement.VerticalAlignment = VerticalAlignment.Stretch;
            }
        }
    }
}﻿using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Threading.Tasks;
using System.Windows;
using UP.Models;
using UP.Pages;
using UP.Services;

namespace UP
{
    public static class AppData
    {
        public static ApiService ApiService { get; set; } = new ApiService();
        public static UserData CurrentUser { get; set; }

        public static ObservableCollection<string> Products { get; set; } = new ObservableCollection<string>();
        public static ObservableCollection<Receipts.DailyMenu> WeeklyMenu { get; set; } = new ObservableCollection<Receipts.DailyMenu>();
        public static ObservableCollection<string> ShoppingList { get; set; } = new ObservableCollection<string>();
        public static ObservableCollection<RecipeDetailsPage.RecipeData> Favorites { get; set; } = new ObservableCollection<RecipeDetailsPage.RecipeData>();
        public static ObservableCollection<RecipeDto> AllRecipes { get; set; } = new ObservableCollection<RecipeDto>();

        public static async void InitializeAfterLogin(UserData user)
        {
            CurrentUser = user;
            await LoadInitialData();
        }

        public static async Task LoadInitialData()
        {
            try
            {
                await LoadRecipes();
                await LoadFavorites();
                await LoadCurrentMenu();
                await LoadShoppingList();
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Ошибка загрузки данных: {ex.Message}", "Ошибка");
            }
        }

        public static async Task LoadRecipes()
        {
            try
            {
                var recipes = await ApiService.GetRecipesAsync();
                AllRecipes.Clear();

                foreach (var recipe in recipes)
                {
                    AllRecipes.Add(recipe);
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error loading recipes: {ex.Message}");
            }
        }

        public static async Task LoadFavorites()
        {
            try
            {
                var favorites = await ApiService.GetFavoritesAsync();
                Favorites.Clear();

                foreach (var recipe in favorites)
                {
                    Favorites.Add(ConvertToRecipeData(recipe));
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error loading favorites: {ex.Message}");
            }
        }

        public static async Task LoadCurrentMenu()
        {
            try
            {
                var menu = await ApiService.GetCurrentMenuAsync();
                WeeklyMenu.Clear();

                if (menu != null && menu.Days != null)
                {
                    foreach (var day in menu.Days)
                    {
                        foreach (var meal in day.Meals)
                        {
                            WeeklyMenu.Add(new Receipts.DailyMenu
                            {
                                Day = day.Date,
                                Meal = meal.RecipeTitle,
                                Description = $"Калории: {meal.Calories} | Время: {meal.PrepTime} мин"
                            });
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error loading menu: {ex.Message}");
            }
        }

        public static async Task LoadShoppingList()
        {
            try
            {
                var shoppingList = await ApiService.GetCurrentShoppingListAsync();
                ShoppingList.Clear();

                if (shoppingList != null && shoppingList.Items != null)
                {
                    foreach (var item in shoppingList.Items)
                    {
                        if (!item.IsPurchased)
                        {
                            ShoppingList.Add($"{item.IngredientName} - {item.Quantity} {item.Unit}");
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error loading shopping list: {ex.Message}");
            }
        }

        public static async Task<bool> AddToFavorites(RecipeDetailsPage.RecipeData recipe)
        {
            try
            {
                var apiRecipe = AllRecipes.FirstOrDefault(r => r.Title == recipe.Title);
                if (apiRecipe != null)
                {
                    return await ApiService.ToggleFavoriteAsync(apiRecipe.Id);
                }
                return false;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error adding to favorites: {ex.Message}");
                return false;
            }
        }

        public static async Task<bool> RemoveFromFavorites(RecipeDetailsPage.RecipeData recipe)
        {
            try
            {
                var apiRecipe = AllRecipes.FirstOrDefault(r => r.Title == recipe.Title);
                if (apiRecipe != null)
                {
                    return await ApiService.ToggleFavoriteAsync(apiRecipe.Id);
                }
                return false;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error removing from favorites: {ex.Message}");
                return false;
            }
        }

        public static async Task<bool> GenerateNewMenu(GenerateMenuRequest request)
        {
            try
            {
                Console.WriteLine($"Generating menu with request: Days={request.Days}, Calories={request.TargetCaloriesPerDay}, Tags={string.Join(", ", request.CuisineTags)}");

                var menu = await ApiService.GenerateMenuAsync(request);

                Console.WriteLine($"Menu generation response: {(menu != null ? "Success" : "Null response")}");

                if (menu != null)
                {
                    Console.WriteLine($"Menu ID: {menu.Id}, Days count: {menu.Days?.Count}");

                    if (menu.Days != null && menu.Days.Count > 0)
                    {
                        await LoadCurrentMenu();

                        if (menu.Id > 0)
                        {
                            Console.WriteLine($"Generating shopping list for menu ID: {menu.Id}");
                            await ApiService.GenerateShoppingListAsync(menu.Id);
                            await LoadShoppingList();
                        }
                        return true;
                    }
                    else
                    {
                        Console.WriteLine("Menu generated but has no days");
                        return false;
                    }
                }
                return false;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error generating menu: {ex.Message}");
                Console.WriteLine($"Stack trace: {ex.StackTrace}");
                return false;
            }
        }

        private static RecipeDetailsPage.RecipeData ConvertToRecipeData(RecipeDto recipe)
        {
            return new RecipeDetailsPage.RecipeData
            {
                Title = recipe.Title,
                Description = recipe.Description,
                ImageUrl = recipe.ImageUrl,
                Ingredients = recipe.Ingredients?.ConvertAll(i => $"{i.Name} - {i.Quantity} {i.Unit}") ?? new List<string>(),
                Steps = recipe.Instructions ?? new List<string>()
            };
        }

        public static void Logout()
        {
            CurrentUser = null;
            ApiService.ClearToken();

            Products.Clear();
            WeeklyMenu.Clear();
            ShoppingList.Clear();
            Favorites.Clear();
            AllRecipes.Clear();
        }
    }
}﻿using System.Collections.Generic;
using System.Collections.ObjectModel;

namespace UP.Models
{
    public class LoginRequest
    {
        public string Username { get; set; }
        public string Password { get; set; }
    }

    public class RegisterRequest
    {
        public string Username { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
        public List<string> Allergies { get; set; } = new List<string>();
    }

    public class AuthResponse
    {
        public bool Success { get; set; }
        public string Message { get; set; }
        public UserData Data { get; set; }
    }

    public class UserData
    {
        public int Id { get; set; }
        public string Username { get; set; }
        public string Email { get; set; }
        public string Token { get; set; }
    }

    public class ApiResponse<T>
    {
        public bool Success { get; set; }
        public string Message { get; set; }
        public T Data { get; set; }
    }

    public class RecipeDto
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string Description { get; set; }
        public string ImageUrl { get; set; }
        public int PrepTime { get; set; }
        public int CookTime { get; set; }
        public decimal Calories { get; set; }
        public List<IngredientDto> Ingredients { get; set; } = new List<IngredientDto>();
        public List<string> Instructions { get; set; } = new List<string>();
        public string CuisineType { get; set; }
        public string Difficulty { get; set; }
    }
    public class DailyMenu
    {
        public string Day { get; set; }
        public string Meal { get; set; }
        public string Description { get; set; }
        public int RecipeId { get; set; }
    }
    public class IngredientDto
    {
        public int Id {  set; get; }
        public string Name { get; set; }
        public decimal Quantity { get; set; }
        public string Unit { get; set; }
        public string Category { get; set; }
    }

    public class GenerateMenuRequest
    {
        public int Days { get; set; } = 7;
        public decimal? TargetCaloriesPerDay { get; set; }
        public List<string> CuisineTags { get; set; } = new List<string>();
        public List<string> MealTypes { get; set; } = new List<string> { "breakfast", "lunch", "dinner" };
        public bool UseInventory { get; set; } = false;
    }

    public class MenuDto
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public decimal TotalCalories { get; set; }
        public List<MenuDayDto> Days { get; set; } = new List<MenuDayDto>();
    }

    public class MenuDayDto
    {
        public string Date { get; set; }
        public List<MenuMealDto> Meals { get; set; } = new List<MenuMealDto>();
    }

    public class SimpleAuthResponse
    {
        public int Id { get; set; }
        public string Username { get; set; }
        public string Email { get; set; }
        public string FullName { get; set; }
        public string Token { get; set; }
    }
    public class MenuMealDto
    {
        public int Id { get; set; }
        public int RecipeId { get; set; }
        public string RecipeTitle { get; set; }
        public string MealType { get; set; }
        public decimal Calories { get; set; }
        public int PrepTime { get; set; }
        public string ImageUrl { get; set; }
    }

    public class ShoppingListDto
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public bool IsCompleted { get; set; }
        public List<ShoppingListItemDto> Items { get; set; } = new List<ShoppingListItemDto>();
    }

    public class ShoppingListItemDto
    {
        public int Id { get; set; }
        public string IngredientName { get; set; }
        public decimal Quantity { get; set; }
        public string Unit { get; set; }
        public string Category { get; set; }
        public bool IsPurchased { get; set; }
    }
}// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETFramework,Version=v4.7.2", FrameworkDisplayName = ".NET Framework 4.7.2")]
﻿#pragma checksum "..\..\App.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "59C6E7EBEF07C7464503EDEE481DBC704FD9C67A67A4798EB6A2D4C5EECF618C"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;
using UP;


namespace UP {
    
    
    /// <summary>
    /// App
    /// </summary>
    public partial class App : System.Windows.Application {
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            
            #line 5 "..\..\App.xaml"
            this.StartupUri = new System.Uri("MainWindow.xaml", System.UriKind.Relative);
            
            #line default
            #line hidden
        }
        
        /// <summary>
        /// Application Entry Point.
        /// </summary>
        [System.STAThreadAttribute()]
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public static void Main() {
            UP.App app = new UP.App();
            app.InitializeComponent();
            app.Run();
        }
    }
}

﻿#pragma checksum "..\..\App.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "59C6E7EBEF07C7464503EDEE481DBC704FD9C67A67A4798EB6A2D4C5EECF618C"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;
using UP;


namespace UP {
    
    
    /// <summary>
    /// App
    /// </summary>
    public partial class App : System.Windows.Application {
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            
            #line 5 "..\..\App.xaml"
            this.StartupUri = new System.Uri("MainWindow.xaml", System.UriKind.Relative);
            
            #line default
            #line hidden
        }
        
        /// <summary>
        /// Application Entry Point.
        /// </summary>
        [System.STAThreadAttribute()]
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public static void Main() {
            UP.App app = new UP.App();
            app.InitializeComponent();
            app.Run();
        }
    }
}

﻿#pragma checksum "..\..\MainWindow.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "57B0F1AB726BA964D4384C2E3267436C082E830B693F52B35C3BD256355F725A"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;
using UP;


namespace UP {
    
    
    /// <summary>
    /// MainWindow
    /// </summary>
    public partial class MainWindow : System.Windows.Window, System.Windows.Markup.IComponentConnector {
        
        
        #line 11 "..\..\MainWindow.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Frame frame;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/mainwindow.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\MainWindow.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            this.frame = ((System.Windows.Controls.Frame)(target));
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿#pragma checksum "..\..\MainWindow.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "57B0F1AB726BA964D4384C2E3267436C082E830B693F52B35C3BD256355F725A"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;
using UP;


namespace UP {
    
    
    /// <summary>
    /// MainWindow
    /// </summary>
    public partial class MainWindow : System.Windows.Window, System.Windows.Markup.IComponentConnector {
        
        
        #line 11 "..\..\MainWindow.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Frame frame;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/mainwindow.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\MainWindow.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            this.frame = ((System.Windows.Controls.Frame)(target));
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

[assembly: System.Windows.Resources.AssemblyAssociatedContentFileAttribute("images/scary.jpg")]


﻿//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

[assembly: System.Windows.Resources.AssemblyAssociatedContentFileAttribute("images/scary.jpg")]


﻿#pragma checksum "..\..\..\Pages\FavoritesPage.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "B57B879EB1A4D945BAFEE9F657E4FAF9BCEA2AC7A9CB49B7F5867266A931BE9B"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// FavoritesPage
    /// </summary>
    public partial class FavoritesPage : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector, System.Windows.Markup.IStyleConnector {
        
        
        #line 53 "..\..\..\Pages\FavoritesPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl FavoritesList;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/favoritespage.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\FavoritesPage.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            
            #line 42 "..\..\..\Pages\FavoritesPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            case 2:
            this.FavoritesList = ((System.Windows.Controls.ItemsControl)(target));
            return;
            }
            this._contentLoaded = true;
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        void System.Windows.Markup.IStyleConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 3:
            
            #line 95 "..\..\..\Pages\FavoritesPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.OpenRecipe_Click);
            
            #line default
            #line hidden
            break;
            case 4:
            
            #line 104 "..\..\..\Pages\FavoritesPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RemoveRecipe_Click);
            
            #line default
            #line hidden
            break;
            }
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\FavoritesPage.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "B57B879EB1A4D945BAFEE9F657E4FAF9BCEA2AC7A9CB49B7F5867266A931BE9B"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// FavoritesPage
    /// </summary>
    public partial class FavoritesPage : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector, System.Windows.Markup.IStyleConnector {
        
        
        #line 53 "..\..\..\Pages\FavoritesPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl FavoritesList;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/favoritespage.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\FavoritesPage.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            
            #line 42 "..\..\..\Pages\FavoritesPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            case 2:
            this.FavoritesList = ((System.Windows.Controls.ItemsControl)(target));
            return;
            }
            this._contentLoaded = true;
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        void System.Windows.Markup.IStyleConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 3:
            
            #line 95 "..\..\..\Pages\FavoritesPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.OpenRecipe_Click);
            
            #line default
            #line hidden
            break;
            case 4:
            
            #line 104 "..\..\..\Pages\FavoritesPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RemoveRecipe_Click);
            
            #line default
            #line hidden
            break;
            }
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\LogInPage.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "3E4A75613654FD92FAA439A52A2C6C0B23B2591804F2E62AA66DFBC5001D5E78"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// LogInPage
    /// </summary>
    public partial class LogInPage : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector {
        
        
        #line 68 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox SecretCodeBox;
        
        #line default
        #line hidden
        
        
        #line 90 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox UsernameTextBox;
        
        #line default
        #line hidden
        
        
        #line 101 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.PasswordBox PasswordBox;
        
        #line default
        #line hidden
        
        
        #line 122 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Button LoginButton;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/loginpage.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\LogInPage.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            this.SecretCodeBox = ((System.Windows.Controls.TextBox)(target));
            
            #line 76 "..\..\..\Pages\LogInPage.xaml"
            this.SecretCodeBox.KeyDown += new System.Windows.Input.KeyEventHandler(this.SecretCodeBox_KeyDown);
            
            #line default
            #line hidden
            return;
            case 2:
            this.UsernameTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 3:
            this.PasswordBox = ((System.Windows.Controls.PasswordBox)(target));
            return;
            case 4:
            this.LoginButton = ((System.Windows.Controls.Button)(target));
            
            #line 126 "..\..\..\Pages\LogInPage.xaml"
            this.LoginButton.Click += new System.Windows.RoutedEventHandler(this.LoginButton_Click);
            
            #line default
            #line hidden
            return;
            case 5:
            
            #line 135 "..\..\..\Pages\LogInPage.xaml"
            ((System.Windows.Controls.TextBlock)(target)).MouseLeftButtonDown += new System.Windows.Input.MouseButtonEventHandler(this.RegisterText_MouseLeftButtonDown);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\LogInPage.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "3E4A75613654FD92FAA439A52A2C6C0B23B2591804F2E62AA66DFBC5001D5E78"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// LogInPage
    /// </summary>
    public partial class LogInPage : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector {
        
        
        #line 68 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox SecretCodeBox;
        
        #line default
        #line hidden
        
        
        #line 90 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox UsernameTextBox;
        
        #line default
        #line hidden
        
        
        #line 101 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.PasswordBox PasswordBox;
        
        #line default
        #line hidden
        
        
        #line 122 "..\..\..\Pages\LogInPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Button LoginButton;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/loginpage.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\LogInPage.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            this.SecretCodeBox = ((System.Windows.Controls.TextBox)(target));
            
            #line 76 "..\..\..\Pages\LogInPage.xaml"
            this.SecretCodeBox.KeyDown += new System.Windows.Input.KeyEventHandler(this.SecretCodeBox_KeyDown);
            
            #line default
            #line hidden
            return;
            case 2:
            this.UsernameTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 3:
            this.PasswordBox = ((System.Windows.Controls.PasswordBox)(target));
            return;
            case 4:
            this.LoginButton = ((System.Windows.Controls.Button)(target));
            
            #line 126 "..\..\..\Pages\LogInPage.xaml"
            this.LoginButton.Click += new System.Windows.RoutedEventHandler(this.LoginButton_Click);
            
            #line default
            #line hidden
            return;
            case 5:
            
            #line 135 "..\..\..\Pages\LogInPage.xaml"
            ((System.Windows.Controls.TextBlock)(target)).MouseLeftButtonDown += new System.Windows.Input.MouseButtonEventHandler(this.RegisterText_MouseLeftButtonDown);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\ReceiptDetailPage.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "46A0E84F936389FF6C4E7C0A4CC8D21A99228C1847E6C9D0D906BE17A25C24CE"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// RecipeDetailsPage
    /// </summary>
    public partial class RecipeDetailsPage : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector {
        
        
        #line 67 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBlock RecipeTitleText;
        
        #line default
        #line hidden
        
        
        #line 73 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Image RecipeImage;
        
        #line default
        #line hidden
        
        
        #line 78 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBlock RecipeDescriptionText;
        
        #line default
        #line hidden
        
        
        #line 95 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl IngredientsList;
        
        #line default
        #line hidden
        
        
        #line 113 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl StepsList;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/receiptdetailpage.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\ReceiptDetailPage.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            
            #line 51 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            case 2:
            this.RecipeTitleText = ((System.Windows.Controls.TextBlock)(target));
            return;
            case 3:
            this.RecipeImage = ((System.Windows.Controls.Image)(target));
            return;
            case 4:
            this.RecipeDescriptionText = ((System.Windows.Controls.TextBlock)(target));
            return;
            case 5:
            this.IngredientsList = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 6:
            this.StepsList = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 7:
            
            #line 138 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.StartTimer_Click);
            
            #line default
            #line hidden
            return;
            case 8:
            
            #line 139 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.AddToShoppingList_Click);
            
            #line default
            #line hidden
            return;
            case 9:
            
            #line 140 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.AddToFavorites_Click);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\ReceiptDetailPage.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "46A0E84F936389FF6C4E7C0A4CC8D21A99228C1847E6C9D0D906BE17A25C24CE"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// RecipeDetailsPage
    /// </summary>
    public partial class RecipeDetailsPage : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector {
        
        
        #line 67 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBlock RecipeTitleText;
        
        #line default
        #line hidden
        
        
        #line 73 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Image RecipeImage;
        
        #line default
        #line hidden
        
        
        #line 78 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBlock RecipeDescriptionText;
        
        #line default
        #line hidden
        
        
        #line 95 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl IngredientsList;
        
        #line default
        #line hidden
        
        
        #line 113 "..\..\..\Pages\ReceiptDetailPage.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl StepsList;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/receiptdetailpage.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\ReceiptDetailPage.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            
            #line 51 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            case 2:
            this.RecipeTitleText = ((System.Windows.Controls.TextBlock)(target));
            return;
            case 3:
            this.RecipeImage = ((System.Windows.Controls.Image)(target));
            return;
            case 4:
            this.RecipeDescriptionText = ((System.Windows.Controls.TextBlock)(target));
            return;
            case 5:
            this.IngredientsList = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 6:
            this.StepsList = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 7:
            
            #line 138 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.StartTimer_Click);
            
            #line default
            #line hidden
            return;
            case 8:
            
            #line 139 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.AddToShoppingList_Click);
            
            #line default
            #line hidden
            return;
            case 9:
            
            #line 140 "..\..\..\Pages\ReceiptDetailPage.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.AddToFavorites_Click);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\Receipts.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "9C3DC0E618CC1C622514BB425882FCA3C4E5BC0C3FEAE0285BBBFEF5EFE30D73"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;
using UP.Pages;


namespace UP.Pages {
    
    
    /// <summary>
    /// Receipts
    /// </summary>
    public partial class Receipts : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector, System.Windows.Markup.IStyleConnector {
        
        
        #line 107 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox NewProductTextBox;
        
        #line default
        #line hidden
        
        
        #line 119 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ListView ProductsListView;
        
        #line default
        #line hidden
        
        
        #line 157 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox GlutenCheckBox;
        
        #line default
        #line hidden
        
        
        #line 161 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox LactoseCheckBox;
        
        #line default
        #line hidden
        
        
        #line 165 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox NutsCheckBox;
        
        #line default
        #line hidden
        
        
        #line 169 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox SeafoodCheckBox;
        
        #line default
        #line hidden
        
        
        #line 176 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox OtherAllergiesTextBox;
        
        #line default
        #line hidden
        
        
        #line 188 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Button GenerateMenuButton;
        
        #line default
        #line hidden
        
        
        #line 211 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl WeeklyMenuItemsControl;
        
        #line default
        #line hidden
        
        
        #line 267 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl ActiveTimersItemsControl;
        
        #line default
        #line hidden
        
        
        #line 299 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBlock NoTimersText;
        
        #line default
        #line hidden
        
        
        #line 322 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ListView ShoppingListListView;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/receipts.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\Receipts.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            
            #line 80 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.OpenFavorites_Click);
            
            #line default
            #line hidden
            return;
            case 2:
            this.NewProductTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 3:
            
            #line 117 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.AddProduct_Click);
            
            #line default
            #line hidden
            return;
            case 4:
            this.ProductsListView = ((System.Windows.Controls.ListView)(target));
            return;
            case 6:
            this.GlutenCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 7:
            this.LactoseCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 8:
            this.NutsCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 9:
            this.SeafoodCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 10:
            this.OtherAllergiesTextBox = ((System.Windows.Controls.TextBox)(target));
            
            #line 183 "..\..\..\Pages\Receipts.xaml"
            this.OtherAllergiesTextBox.TextChanged += new System.Windows.Controls.TextChangedEventHandler(this.OtherAllergiesTextBox_TextChanged);
            
            #line default
            #line hidden
            return;
            case 11:
            this.GenerateMenuButton = ((System.Windows.Controls.Button)(target));
            
            #line 194 "..\..\..\Pages\Receipts.xaml"
            this.GenerateMenuButton.Click += new System.Windows.RoutedEventHandler(this.GenerateMenu_Click);
            
            #line default
            #line hidden
            return;
            case 12:
            
            #line 202 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RefreshData_Click);
            
            #line default
            #line hidden
            return;
            case 13:
            this.WeeklyMenuItemsControl = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 16:
            this.ActiveTimersItemsControl = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 18:
            this.NoTimersText = ((System.Windows.Controls.TextBlock)(target));
            return;
            case 19:
            this.ShoppingListListView = ((System.Windows.Controls.ListView)(target));
            return;
            case 21:
            
            #line 339 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.ExportShoppingList_Click);
            
            #line default
            #line hidden
            return;
            case 22:
            
            #line 356 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        void System.Windows.Markup.IStyleConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 5:
            
            #line 140 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RemoveProduct_Click);
            
            #line default
            #line hidden
            break;
            case 14:
            
            #line 237 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.StartTimer_Click);
            
            #line default
            #line hidden
            break;
            case 15:
            
            #line 246 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.OpenRecipe_Click);
            
            #line default
            #line hidden
            break;
            case 17:
            
            #line 292 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.StopTimer_Click);
            
            #line default
            #line hidden
            break;
            case 20:
            
            #line 331 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.CheckBox)(target)).Checked += new System.Windows.RoutedEventHandler(this.ShoppingItem_Checked);
            
            #line default
            #line hidden
            break;
            }
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\Receipts.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "9C3DC0E618CC1C622514BB425882FCA3C4E5BC0C3FEAE0285BBBFEF5EFE30D73"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;
using UP.Pages;


namespace UP.Pages {
    
    
    /// <summary>
    /// Receipts
    /// </summary>
    public partial class Receipts : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector, System.Windows.Markup.IStyleConnector {
        
        
        #line 107 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox NewProductTextBox;
        
        #line default
        #line hidden
        
        
        #line 119 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ListView ProductsListView;
        
        #line default
        #line hidden
        
        
        #line 157 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox GlutenCheckBox;
        
        #line default
        #line hidden
        
        
        #line 161 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox LactoseCheckBox;
        
        #line default
        #line hidden
        
        
        #line 165 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox NutsCheckBox;
        
        #line default
        #line hidden
        
        
        #line 169 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.CheckBox SeafoodCheckBox;
        
        #line default
        #line hidden
        
        
        #line 176 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox OtherAllergiesTextBox;
        
        #line default
        #line hidden
        
        
        #line 188 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.Button GenerateMenuButton;
        
        #line default
        #line hidden
        
        
        #line 211 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl WeeklyMenuItemsControl;
        
        #line default
        #line hidden
        
        
        #line 267 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ItemsControl ActiveTimersItemsControl;
        
        #line default
        #line hidden
        
        
        #line 299 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBlock NoTimersText;
        
        #line default
        #line hidden
        
        
        #line 322 "..\..\..\Pages\Receipts.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.ListView ShoppingListListView;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/receipts.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\Receipts.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            
            #line 80 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.OpenFavorites_Click);
            
            #line default
            #line hidden
            return;
            case 2:
            this.NewProductTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 3:
            
            #line 117 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.AddProduct_Click);
            
            #line default
            #line hidden
            return;
            case 4:
            this.ProductsListView = ((System.Windows.Controls.ListView)(target));
            return;
            case 6:
            this.GlutenCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 7:
            this.LactoseCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 8:
            this.NutsCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 9:
            this.SeafoodCheckBox = ((System.Windows.Controls.CheckBox)(target));
            return;
            case 10:
            this.OtherAllergiesTextBox = ((System.Windows.Controls.TextBox)(target));
            
            #line 183 "..\..\..\Pages\Receipts.xaml"
            this.OtherAllergiesTextBox.TextChanged += new System.Windows.Controls.TextChangedEventHandler(this.OtherAllergiesTextBox_TextChanged);
            
            #line default
            #line hidden
            return;
            case 11:
            this.GenerateMenuButton = ((System.Windows.Controls.Button)(target));
            
            #line 194 "..\..\..\Pages\Receipts.xaml"
            this.GenerateMenuButton.Click += new System.Windows.RoutedEventHandler(this.GenerateMenu_Click);
            
            #line default
            #line hidden
            return;
            case 12:
            
            #line 202 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RefreshData_Click);
            
            #line default
            #line hidden
            return;
            case 13:
            this.WeeklyMenuItemsControl = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 16:
            this.ActiveTimersItemsControl = ((System.Windows.Controls.ItemsControl)(target));
            return;
            case 18:
            this.NoTimersText = ((System.Windows.Controls.TextBlock)(target));
            return;
            case 19:
            this.ShoppingListListView = ((System.Windows.Controls.ListView)(target));
            return;
            case 21:
            
            #line 339 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.ExportShoppingList_Click);
            
            #line default
            #line hidden
            return;
            case 22:
            
            #line 356 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        void System.Windows.Markup.IStyleConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 5:
            
            #line 140 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RemoveProduct_Click);
            
            #line default
            #line hidden
            break;
            case 14:
            
            #line 237 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.StartTimer_Click);
            
            #line default
            #line hidden
            break;
            case 15:
            
            #line 246 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.OpenRecipe_Click);
            
            #line default
            #line hidden
            break;
            case 17:
            
            #line 292 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.StopTimer_Click);
            
            #line default
            #line hidden
            break;
            case 20:
            
            #line 331 "..\..\..\Pages\Receipts.xaml"
            ((System.Windows.Controls.CheckBox)(target)).Checked += new System.Windows.RoutedEventHandler(this.ShoppingItem_Checked);
            
            #line default
            #line hidden
            break;
            }
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\RegIn.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "737DDF81BA1078259C253AB077DB5CABDB5567025C18664A3413BDCA7E8C7C45"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// RegIn
    /// </summary>
    public partial class RegIn : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector {
        
        
        #line 87 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox UsernameTextBox;
        
        #line default
        #line hidden
        
        
        #line 98 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox EmailTextBox;
        
        #line default
        #line hidden
        
        
        #line 109 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.PasswordBox PasswordBox;
        
        #line default
        #line hidden
        
        
        #line 135 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.PasswordBox ConfirmPasswordBox;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/regin.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\RegIn.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            this.UsernameTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 2:
            this.EmailTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 3:
            this.PasswordBox = ((System.Windows.Controls.PasswordBox)(target));
            return;
            case 4:
            this.ConfirmPasswordBox = ((System.Windows.Controls.PasswordBox)(target));
            return;
            case 5:
            
            #line 167 "..\..\..\Pages\RegIn.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RegisterButton_Click);
            
            #line default
            #line hidden
            return;
            case 6:
            
            #line 174 "..\..\..\Pages\RegIn.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            case 7:
            
            #line 184 "..\..\..\Pages\RegIn.xaml"
            ((System.Windows.Controls.TextBlock)(target)).MouseLeftButtonDown += new System.Windows.Input.MouseButtonEventHandler(this.LoginText_MouseLeftButtonDown);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿#pragma checksum "..\..\..\Pages\RegIn.xaml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "737DDF81BA1078259C253AB077DB5CABDB5567025C18664A3413BDCA7E8C7C45"
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Automation;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Media.TextFormatting;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Shell;


namespace UP.Pages {
    
    
    /// <summary>
    /// RegIn
    /// </summary>
    public partial class RegIn : System.Windows.Controls.Page, System.Windows.Markup.IComponentConnector {
        
        
        #line 87 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox UsernameTextBox;
        
        #line default
        #line hidden
        
        
        #line 98 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.TextBox EmailTextBox;
        
        #line default
        #line hidden
        
        
        #line 109 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.PasswordBox PasswordBox;
        
        #line default
        #line hidden
        
        
        #line 135 "..\..\..\Pages\RegIn.xaml"
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1823:AvoidUnusedPrivateFields")]
        internal System.Windows.Controls.PasswordBox ConfirmPasswordBox;
        
        #line default
        #line hidden
        
        private bool _contentLoaded;
        
        /// <summary>
        /// InitializeComponent
        /// </summary>
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        public void InitializeComponent() {
            if (_contentLoaded) {
                return;
            }
            _contentLoaded = true;
            System.Uri resourceLocater = new System.Uri("/UP;component/pages/regin.xaml", System.UriKind.Relative);
            
            #line 1 "..\..\..\Pages\RegIn.xaml"
            System.Windows.Application.LoadComponent(this, resourceLocater);
            
            #line default
            #line hidden
        }
        
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks", "4.0.0.0")]
        [System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Never)]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Design", "CA1033:InterfaceMethodsShouldBeCallableByChildTypes")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Maintainability", "CA1502:AvoidExcessiveComplexity")]
        [System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1800:DoNotCastUnnecessarily")]
        void System.Windows.Markup.IComponentConnector.Connect(int connectionId, object target) {
            switch (connectionId)
            {
            case 1:
            this.UsernameTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 2:
            this.EmailTextBox = ((System.Windows.Controls.TextBox)(target));
            return;
            case 3:
            this.PasswordBox = ((System.Windows.Controls.PasswordBox)(target));
            return;
            case 4:
            this.ConfirmPasswordBox = ((System.Windows.Controls.PasswordBox)(target));
            return;
            case 5:
            
            #line 167 "..\..\..\Pages\RegIn.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.RegisterButton_Click);
            
            #line default
            #line hidden
            return;
            case 6:
            
            #line 174 "..\..\..\Pages\RegIn.xaml"
            ((System.Windows.Controls.Button)(target)).Click += new System.Windows.RoutedEventHandler(this.BackButton_Click);
            
            #line default
            #line hidden
            return;
            case 7:
            
            #line 184 "..\..\..\Pages\RegIn.xaml"
            ((System.Windows.Controls.TextBlock)(target)).MouseLeftButtonDown += new System.Windows.Input.MouseButtonEventHandler(this.LoginText_MouseLeftButtonDown);
            
            #line default
            #line hidden
            return;
            }
            this._contentLoaded = true;
        }
    }
}

﻿using System.Linq;
using System.Windows;
using System.Windows.Controls;
using UP.Services;

namespace UP.Pages
{
    public partial class FavoritesPage : Page
    {
        public FavoritesPage()
        {
            InitializeComponent();
            LoadFavorites();
        }

        private void LoadFavorites()
        {
            FavoritesList.ItemsSource = AppData.Favorites;
        }

        private void BackButton_Click(object sender, RoutedEventArgs e)
        {
            MainWindow.mainWindow.OpenPages(new Receipts());
        }

        private async void OpenRecipe_Click(object sender, RoutedEventArgs e)
        {
            if (sender is Button button && button.DataContext is RecipeDetailsPage.RecipeData recipe)
            {
                var detailsPage = new RecipeDetailsPage(
                    recipe.Title,
                    recipe.Description,
                    recipe.ImageUrl,
                    recipe.Ingredients,
                    recipe.Steps
                );

                MainWindow.mainWindow.OpenPages(detailsPage);
            }
        }

        private async void RemoveRecipe_Click(object sender, RoutedEventArgs e)
        {
            if (sender is Button button && button.DataContext is RecipeDetailsPage.RecipeData recipe)
            {
                if (MessageBox.Show($"Удалить рецепт '{recipe.Title}' из избранного?", "Подтверждение",
                                    MessageBoxButton.YesNo, MessageBoxImage.Question) == MessageBoxResult.Yes)
                {
                    var success = await AppData.RemoveFromFavorites(recipe);
                    if (success)
                    {
                        AppData.Favorites.Remove(recipe);
                        MessageBox.Show("Рецепт удален из избранного", "Успех");
                    }
                    else
                    {
                        MessageBox.Show("Не удалось удалить рецепт", "Ошибка");
                    }
                }
            }
        }

        private async void RefreshFavorites_Click(object sender, RoutedEventArgs e)
        {
            await AppData.LoadFavorites();
            LoadFavorites();
        }
    }
}﻿using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using UP.Models;
using UP.Services;

namespace UP.Pages
{
    public partial class LogInPage : Page
    {
        private string secretCode = "qweasd";

        public LogInPage()
        {
            InitializeComponent();
            Loaded += (s, e) => UsernameTextBox.Focus();
            UsernameTextBox.KeyDown += TextBox_KeyDown;
            PasswordBox.KeyDown += TextBox_KeyDown;
        }

        private async void LoginButton_Click(object sender, RoutedEventArgs e)
        {
            await AttemptLogin();
        }

        private async void TextBox_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Enter)
            {
                await AttemptLogin();
            }
        }

        private async Task AttemptLogin()
        {
            string username = UsernameTextBox.Text;
            string password = PasswordBox.Password;

            if (string.IsNullOrWhiteSpace(username))
            {
                ShowMessage("Введите имя пользователя");
                UsernameTextBox.Focus();
                return;
            }

            if (string.IsNullOrWhiteSpace(password))
            {
                ShowMessage("Введите пароль");
                PasswordBox.Focus();
                return;
            }

            LoginButton.IsEnabled = false;
            LoginButton.Content = "Вход...";

            try
            {
                var user = await AppData.ApiService.LoginAsync(username, password);
                AppData.InitializeAfterLogin(user);

                ShowMessage($"Успешный вход! Добро пожаловать, {user.Username}");
                MainWindow.mainWindow.OpenPages(new Receipts());
            }
            catch (HttpRequestException httpEx)
            {
                ShowMessage($"Ошибка сети: {httpEx.Message}\n\nПроверьте:\n1. Запущен ли бекенд\n2. Блокирует ли фаервол\n3. Доступен ли localhost:7197");
            }
            catch (Exception ex)
            {
                ShowMessage($"Ошибка входа: {ex.Message}");
            }
            finally
            {
                LoginButton.IsEnabled = true;
                LoginButton.Content = "Войти";
            }
        }
        private void ShowMessage(string message)
        {
            MessageBox.Show(message, "Вход в систему",
                          MessageBoxButton.OK, MessageBoxImage.Information);
        }

        private void RegisterText_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            NavigationService?.Navigate(new RegIn());
        }

        private void SecretCodeBox_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Enter)
            {
                if (SecretCodeBox.Text == secretCode)
                {
                    ShowScaryImage();
                }
                SecretCodeBox.Clear();
            }
        }

        private void ShowScaryImage()
        {
            Window scaryWindow = new Window
            {
                Height = 1080,
                Width = 1920,
                WindowState = WindowState.Maximized,
                WindowStyle = WindowStyle.None,
                Topmost = true,
                Left = 0,
                Top = 0
            };

            Image img = new Image
            {
                Source = new System.Windows.Media.Imaging.BitmapImage(new System.Uri("pack://application:,,,/Images/scary.jpg")),
                Stretch = System.Windows.Media.Stretch.UniformToFill
            };

            scaryWindow.Content = img;
            scaryWindow.Show();
        }
    }
}﻿using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using UP.Models;
using UP.Services;

namespace UP.Pages
{
    public partial class RecipeDetailsPage : Page
    {
        public class RecipeData
        {
            public string Title { get; set; }
            public string Description { get; set; }
            public string ImageUrl { get; set; }
            public List<string> Ingredients { get; set; }
            public List<string> Steps { get; set; }
        }

        private RecipeData _currentRecipe;

        public RecipeDetailsPage(string title, string description, string imageUrl, List<string> ingredients, List<string> steps)
        {
            InitializeComponent();

            _currentRecipe = new RecipeData
            {
                Title = title,
                Description = description,
                ImageUrl = imageUrl,
                Ingredients = ingredients,
                Steps = steps
            };

            RecipeTitleText.Text = title;
            RecipeDescriptionText.Text = description;

            if (!string.IsNullOrEmpty(imageUrl))
            {
                RecipeImage.Source = new System.Windows.Media.Imaging.BitmapImage(new Uri(imageUrl));
            }

            IngredientsList.ItemsSource = ingredients;

            var stepObjects = new List<object>();
            int i = 1;
            foreach (var step in steps)
                stepObjects.Add(new { StepNumber = i++, StepText = step });
            StepsList.ItemsSource = stepObjects;
        }

        private void BackButton_Click(object sender, RoutedEventArgs e)
        {
            MainWindow.mainWindow.OpenPages(new Receipts());
        }

        private void StartTimer_Click(object sender, RoutedEventArgs e)
        {
            var timerWindow = new TimerWindow(RecipeTitleText.Text);
            timerWindow.ShowDialog();
        }

        private void AddToShoppingList_Click(object sender, RoutedEventArgs e)
        {
            // Добавляем ингредиенты в локальный список
            foreach (var ingredient in _currentRecipe.Ingredients)
            {
                AppData.ShoppingList.Add(ingredient);
            }

            MessageBox.Show("Ингредиенты добавлены в список покупок.", "Список покупок",
                            MessageBoxButton.OK, MessageBoxImage.Information);
        }

        private async void AddToFavorites_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                var success = await AppData.AddToFavorites(_currentRecipe);
                if (success)
                {
                    // Проверяем, нет ли уже в избранном
                    if (!AppData.Favorites.Any(f => f.Title == _currentRecipe.Title))
                    {
                        AppData.Favorites.Add(_currentRecipe);
                    }

                    MessageBox.Show("Рецепт добавлен в избранное!", "Избранное",
                                    MessageBoxButton.OK, MessageBoxImage.Information);
                }
                else
                {
                    MessageBox.Show("Не удалось добавить в избранное", "Ошибка",
                                    MessageBoxButton.OK, MessageBoxImage.Error);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Ошибка: {ex.Message}", "Ошибка",
                                MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    }
}﻿using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using UP.Models;
using UP.Services;

namespace UP.Pages
{
    public partial class Receipts : Page
    {
        public class DailyMenu
        {
            public string Day { get; set; }
            public string Meal { get; set; }
            public string Description { get; set; }
            public int RecipeId { get; set; }
        }

        public class TimerItem
        {
            public string Name { get; set; }
            public string TimeLeft { get; set; }
            public System.Windows.Threading.DispatcherTimer Timer { get; set; }
            public DateTime EndTime { get; set; }
        }

        private ObservableCollection<string> _products;
        private ObservableCollection<DailyMenu> _weeklyMenu;
        private ObservableCollection<TimerItem> _activeTimers;
        private ObservableCollection<string> _shoppingList;

        public Receipts()
        {
            InitializeComponent();
            InitializeData();
        }

        private void InitializeData()
        {
            _products = AppData.Products;
            _weeklyMenu = AppData.WeeklyMenu;
            _shoppingList = AppData.ShoppingList;
            _activeTimers = new ObservableCollection<TimerItem>();

            ProductsListView.ItemsSource = _products;
            WeeklyMenuItemsControl.ItemsSource = _weeklyMenu;
            ActiveTimersItemsControl.ItemsSource = _activeTimers;
            ShoppingListListView.ItemsSource = _shoppingList;

            UpdateNoTimersVisibility();
        }

        private async void AddProduct_Click(object sender, RoutedEventArgs e)
        {
            if (!string.IsNullOrWhiteSpace(NewProductTextBox.Text))
            {
                var product = NewProductTextBox.Text.Trim();
                _products.Add(product);
                NewProductTextBox.Clear();

                await SaveProductToInventory(product);
            }
        }

        private async Task SaveProductToInventory(string productName)
        {
            try
            {
                var ingredients = await AppData.ApiService.GetIngredientsAsync();
                var ingredient = ingredients.FirstOrDefault(i =>
                    i.Name.Contains(productName));

                if (ingredient != null)
                {
                    var success = await AppData.ApiService.AddToInventoryAsync(
                        ingredient.Id, 1, "шт");

                    if (success)
                    {
                        Console.WriteLine($"Product {productName} added to inventory");
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error saving product to inventory: {ex.Message}");
            }
        }

        private void RemoveProduct_Click(object sender, RoutedEventArgs e)
        {
            if (sender is Button button && button.DataContext is string product)
            {
                _products.Remove(product);
            }
        }

        private async void GenerateMenu_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                if (GenerateMenuButton != null)
                {
                    GenerateMenuButton.IsEnabled = false;
                    GenerateMenuButton.Content = "Генерация...";
                }

                var cuisineTags = GetSelectedCuisineTags();

                if (cuisineTags.Count == 0)
                {
                    cuisineTags = new List<string> { "русская", "европейская", "американская" };
                }

                var request = new GenerateMenuRequest
                {
                    Days = 7,
                    TargetCaloriesPerDay = 2000,
                    CuisineTags = cuisineTags,
                    UseInventory = _products.Count > 0,
                    MealTypes = new List<string> { "breakfast", "lunch", "dinner" }
                };

                var success = await AppData.GenerateNewMenu(request);

                if (success)
                {
                    MessageBox.Show("Меню успешно сгенерировано!", "Успех",
                                  MessageBoxButton.OK, MessageBoxImage.Information);
                }
                else
                {
                    MessageBox.Show("Не удалось сгенерировать меню. Попробуйте другие настройки.", "Ошибка",
                                  MessageBoxButton.OK, MessageBoxImage.Error);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Ошибка генерации меню: {ex.Message}", "Ошибка",
                              MessageBoxButton.OK, MessageBoxImage.Error);
            }
            finally
            {
                if (GenerateMenuButton != null)
                {
                    GenerateMenuButton.IsEnabled = true;
                    GenerateMenuButton.Content = "🎲 Сгенерировать меню на неделю";
                }
            }
        }

        private List<string> GetSelectedCuisineTags()
        {
            var tags = new List<string>();

            if (GlutenCheckBox?.IsChecked == true)
                tags.Add("безглютеновое");
            if (LactoseCheckBox?.IsChecked == true)
                tags.Add("безлактозное");
            if (NutsCheckBox?.IsChecked == true)
                tags.Add("безореховое");
            if (SeafoodCheckBox?.IsChecked == true)
                tags.Add("безморепродуктов");

            if (!string.IsNullOrWhiteSpace(OtherAllergiesTextBox?.Text))
            {
                var customAllergies = OtherAllergiesTextBox.Text.Split(',')
                    .Select(t => t.Trim())
                    .Where(t => !string.IsNullOrEmpty(t));
                tags.AddRange(customAllergies);
            }

            if (tags.Count == 0)
            {
                tags.AddRange(new[] { "русская", "европейская", "американская" });
            }

            return tags;
        }

        private async void OpenRecipe_Click(object sender, RoutedEventArgs e)
        {
            if (sender is Button button && button.DataContext is DailyMenu dailyMenu)
            {
                try
                {
                    if (dailyMenu.RecipeId > 0)
                    {
                        var recipe = await AppData.ApiService.GetRecipeAsync(dailyMenu.RecipeId);

                        if (recipe != null)
                        {
                            var detailsPage = new RecipeDetailsPage(
                                recipe.Title,
                                recipe.Description,
                                recipe.ImageUrl,
                                recipe.Ingredients.ConvertAll(i => $"{i.Name} - {i.Quantity} {i.Unit}"),
                                recipe.Instructions
                            );

                            MainWindow.mainWindow.OpenPages(detailsPage);
                            return;
                        }
                    }

                    var recipeByName = AppData.AllRecipes.FirstOrDefault(r =>
                        r.Title.Equals(dailyMenu.Meal, StringComparison.OrdinalIgnoreCase));

                    if (recipeByName != null)
                    {
                        var detailsPage = new RecipeDetailsPage(
                            recipeByName.Title,
                            recipeByName.Description,
                            recipeByName.ImageUrl,
                            recipeByName.Ingredients.ConvertAll(i => $"{i.Name} - {i.Quantity} {i.Unit}"),
                            recipeByName.Instructions
                        );

                        MainWindow.mainWindow.OpenPages(detailsPage);
                    }
                    else
                    {
                        MessageBox.Show("Рецепт не найден", "Ошибка");
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show($"Ошибка загрузки рецепта: {ex.Message}");
                }
            }
        }

        private void OpenFavorites_Click(object sender, RoutedEventArgs e)
        {
            MainWindow.mainWindow.OpenPages(new FavoritesPage());
        }

        private void StartTimer_Click(object sender, RoutedEventArgs e)
        {
            if (sender is Button button && button.DataContext is DailyMenu menu)
            {
                var timerWindow = new TimerWindow(menu.Meal);
                if (timerWindow.ShowDialog() == true)
                {
                    var timerItem = new TimerItem
                    {
                        Name = menu.Meal,
                        EndTime = DateTime.Now.AddMinutes(timerWindow.SelectedMinutes),
                        Timer = new System.Windows.Threading.DispatcherTimer()
                    };

                    timerItem.Timer.Interval = TimeSpan.FromSeconds(1);
                    timerItem.Timer.Tick += (s, args) => UpdateTimer(timerItem);
                    timerItem.Timer.Start();

                    _activeTimers.Add(timerItem);
                    UpdateNoTimersVisibility();
                    UpdateTimer(timerItem);
                }
            }
        }

        private void UpdateTimer(TimerItem timerItem)
        {
            var timeLeft = timerItem.EndTime - DateTime.Now;

            if (timeLeft.TotalSeconds <= 0)
            {
                timerItem.Timer.Stop();
                timerItem.TimeLeft = "Время вышло!";
                MessageBox.Show($"Таймер '{timerItem.Name}' завершил работу!", "Таймер",
                              MessageBoxButton.OK, MessageBoxImage.Information);
            }
            else
            {
                timerItem.TimeLeft = $"{timeLeft:mm\\:ss}";
            }

            var index = _activeTimers.IndexOf(timerItem);
            if (index >= 0)
            {
                _activeTimers[index] = timerItem;
            }
        }

        private void StopTimer_Click(object sender, RoutedEventArgs e)
        {
            if (sender is Button button && button.DataContext is TimerItem timerItem)
            {
                timerItem.Timer.Stop();
                _activeTimers.Remove(timerItem);
                UpdateNoTimersVisibility();
            }
        }

        private void UpdateNoTimersVisibility()
        {
            NoTimersText.Visibility = _activeTimers.Count == 0 ? Visibility.Visible : Visibility.Collapsed;
        }

        private void ShoppingItem_Checked(object sender, RoutedEventArgs e)
        {
        }

        private async void ExportShoppingList_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                var saveDialog = new Microsoft.Win32.SaveFileDialog
                {
                    Filter = "Текстовые файлы (*.txt)|*.txt",
                    FileName = "Список_покупок.txt"
                };

                if (saveDialog.ShowDialog() == true)
                {
                    var lines = new List<string> { "Список покупок:", "==================" };
                    foreach (var item in _shoppingList)
                    {
                        lines.Add($"- {item}");
                    }
                    System.IO.File.WriteAllLines(saveDialog.FileName, lines);

                    MessageBox.Show("Список покупок экспортирован!", "Успех",
                                  MessageBoxButton.OK, MessageBoxImage.Information);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Ошибка при экспорте: {ex.Message}", "Ошибка",
                              MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }

        private void BackButton_Click(object sender, RoutedEventArgs e)
        {
            foreach (var timer in _activeTimers)
            {
                timer.Timer.Stop();
            }

            AppData.Logout();
            MainWindow.mainWindow.OpenPages(new LogInPage());
        }

        private void OtherAllergiesTextBox_TextChanged(object sender, TextChangedEventArgs e)
        {
        }

        private async void RefreshData_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                await AppData.LoadInitialData();
                MessageBox.Show("Данные обновлены", "Успех");
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Ошибка обновления: {ex.Message}", "Ошибка");
            }
        }
    }

    public class TimerWindow : Window
    {
        public int SelectedMinutes { get; private set; } = 10;

        public TimerWindow(string mealName)
        {
            InitializeComponent();
            Title = $"Таймер для: {mealName}";
        }

        private void InitializeComponent()
        {
            Width = 300;
            Height = 200;
            WindowStartupLocation = WindowStartupLocation.CenterOwner;
            ResizeMode = ResizeMode.NoResize;

            var stackPanel = new StackPanel { Margin = new Thickness(20) };

            stackPanel.Children.Add(new TextBlock
            {
                Text = "Установите время таймера (минуты):",
                Foreground = Brushes.White,
                Margin = new Thickness(0, 0, 0, 10)
            });

            var slider = new Slider
            {
                Minimum = 1,
                Maximum = 120,
                Value = SelectedMinutes,
                Margin = new Thickness(0, 0, 0, 10)
            };
            slider.ValueChanged += (s, e) => SelectedMinutes = (int)e.NewValue;
            stackPanel.Children.Add(slider);

            var valueText = new TextBlock
            {
                Text = $"{SelectedMinutes} мин.",
                Foreground = Brushes.White,
                HorizontalAlignment = HorizontalAlignment.Center,
                Margin = new Thickness(0, 0, 0, 20)
            };
            stackPanel.Children.Add(valueText);

            slider.ValueChanged += (s, e) =>
            {
                SelectedMinutes = (int)e.NewValue;
                valueText.Text = $"{SelectedMinutes} мин.";
            };

            var buttonPanel = new StackPanel { Orientation = Orientation.Horizontal, HorizontalAlignment = HorizontalAlignment.Center };

            var okButton = new Button
            {
                Content = "Запустить",
                Background = new SolidColorBrush(Color.FromRgb(76, 175, 80)),
                Foreground = Brushes.White,
                Margin = new Thickness(0, 0, 10, 0)
            };
            okButton.Click += (s, e) => { DialogResult = true; Close(); };
            buttonPanel.Children.Add(okButton);

            var cancelButton = new Button
            {
                Content = "Отмена",
                Background = new SolidColorBrush(Color.FromRgb(244, 67, 54)),
                Foreground = Brushes.White,
            };
            cancelButton.Click += (s, e) => { DialogResult = false; Close(); };
            buttonPanel.Children.Add(cancelButton);

            stackPanel.Children.Add(buttonPanel);

            Content = stackPanel;
            Background = new SolidColorBrush(Color.FromRgb(30, 30, 30));
        }
    }
}﻿// RegIn.xaml.cs
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using UP.Models;
using UP.Services;

namespace UP.Pages
{
    public partial class RegIn : Page
    {
        public RegIn()
        {
            InitializeComponent();
            Loaded += (s, e) => UsernameTextBox.Focus();

            // Обработка Enter для быстрой навигации
            UsernameTextBox.KeyDown += TextBox_KeyDown;
            EmailTextBox.KeyDown += TextBox_KeyDown;
            PasswordBox.KeyDown += TextBox_KeyDown;
            ConfirmPasswordBox.KeyDown += TextBox_KeyDown;
        }

        private void TextBox_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Enter)
            {
                if (sender == UsernameTextBox)
                    EmailTextBox.Focus();
                else if (sender == EmailTextBox)
                    PasswordBox.Focus();
                else if (sender == PasswordBox)
                    ConfirmPasswordBox.Focus();
                else if (sender == ConfirmPasswordBox)
                    RegisterButton_Click(null, null);
            }
        }

        private async void RegisterButton_Click(object sender, RoutedEventArgs e)
        {
            if (!ValidateForm())
                return;

            try
            {
                // Регистрация пользователя через API
                var user = await AppData.ApiService.RegisterAsync(
                    UsernameTextBox.Text.Trim(),
                    EmailTextBox.Text.Trim(),
                    PasswordBox.Password,
                    new List<string>()); // Аллергии можно добавить позже

                AppData.InitializeAfterLogin(user);

                // Возврат на страницу входа
                NavigationService?.Navigate(new LogInPage());

                MessageBox.Show("Регистрация успешна! Теперь вы можете войти в систему.",
                              "Успешная регистрация",
                              MessageBoxButton.OK, MessageBoxImage.Information);
            }
            catch (Exception ex)
            {
                ShowError($"Ошибка регистрации: {ex.Message}");
            }
        }

        private bool ValidateForm()
        {
            // Проверка имени пользователя
            if (string.IsNullOrWhiteSpace(UsernameTextBox.Text))
            {
                ShowError("Введите имя пользователя");
                UsernameTextBox.Focus();
                return false;
            }

            if (UsernameTextBox.Text.Length < 3)
            {
                ShowError("Имя пользователя должно содержать минимум 3 символа");
                UsernameTextBox.Focus();
                return false;
            }

            // Проверка email
            if (string.IsNullOrWhiteSpace(EmailTextBox.Text))
            {
                ShowError("Введите email");
                EmailTextBox.Focus();
                return false;
            }

            if (!IsValidEmail(EmailTextBox.Text))
            {
                ShowError("Введите корректный email адрес");
                EmailTextBox.Focus();
                return false;
            }

            // Проверка пароля
            if (string.IsNullOrWhiteSpace(PasswordBox.Password))
            {
                ShowError("Введите пароль");
                PasswordBox.Focus();
                return false;
            }

            if (PasswordBox.Password.Length < 6)
            {
                ShowError("Пароль должен содержать минимум 6 символов");
                PasswordBox.Focus();
                return false;
            }

            // Проверка подтверждения пароля
            if (PasswordBox.Password != ConfirmPasswordBox.Password)
            {
                ShowError("Пароли не совпадают");
                ConfirmPasswordBox.Focus();
                return false;
            }

            return true;
        }

        private bool IsValidEmail(string email)
        {
            try
            {
                var regex = new Regex(@"^[^@\s]+@[^@\s]+\.[^@\s]+$");
                return regex.IsMatch(email);
            }
            catch
            {
                return false;
            }
        }

        private void ShowError(string message)
        {
            MessageBox.Show(message, "Ошибка валидации",
                          MessageBoxButton.OK, MessageBoxImage.Warning);
        }

        private void BackButton_Click(object sender, RoutedEventArgs e)
        {
            NavigationService?.Navigate(new LogInPage());
        }

        private void LoginText_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            NavigationService?.Navigate(new LogInPage());
        }
    }
}﻿using System.Reflection;
using System.Resources;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Windows;

// Общие сведения об этой сборке предоставляются следующим набором
// набор атрибутов. Измените значения этих атрибутов, чтобы изменить сведения,
// связанные со сборкой.
[assembly: AssemblyTitle("UP")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("UP")]
[assembly: AssemblyCopyright("Copyright ©  2025")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Установка значения False для параметра ComVisible делает типы в этой сборке невидимыми
// для компонентов COM. Если необходимо обратиться к типу в этой сборке через
// из модели COM, установите атрибут ComVisible для этого типа в значение true.
[assembly: ComVisible(false)]

//Чтобы начать создание локализуемых приложений, задайте
//<UICulture>CultureYouAreCodingWith</UICulture> в файле .csproj
//в <PropertyGroup>. Например, при использовании английского (США)
//в своих исходных файлах установите <UICulture> в en-US.  Затем отмените преобразование в комментарий
//атрибута NeutralResourceLanguage ниже.  Обновите "en-US" в
//строка внизу для обеспечения соответствия настройки UICulture в файле проекта.

//[assembly: NeutralResourcesLanguage("en-US", UltimateResourceFallbackLocation.Satellite)]


[assembly: ThemeInfo(
    ResourceDictionaryLocation.None, //где расположены словари ресурсов по конкретным тематикам
                                     //(используется, если ресурс не найден на странице,
                                     // или в словарях ресурсов приложения)
    ResourceDictionaryLocation.SourceAssembly //где расположен словарь универсальных ресурсов
                                              //(используется, если ресурс не найден на странице,
                                              // в приложении или в каких-либо словарях ресурсов для конкретной темы)
)]


// Сведения о версии для сборки включают четыре следующих значения:
//
//      Основной номер версии
//      Дополнительный номер версии
//      Номер сборки
//      Номер редакции
//
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]
﻿//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код был создан программным средством.
//     Версия среды выполнения: 4.0.30319.42000
//
//     Изменения в этом файле могут привести к неправильному поведению и будут утрачены, если
//     код создан повторно.
// </auto-generated>
//------------------------------------------------------------------------------

namespace UP.Properties
{


    /// <summary>
    ///   Класс ресурсов со строгим типом для поиска локализованных строк и пр.
    /// </summary>
    // Этот класс был автоматически создан при помощи StronglyTypedResourceBuilder
    // класс с помощью таких средств, как ResGen или Visual Studio.
    // Для добавления или удаления члена измените файл .ResX, а затем перезапустите ResGen
    // с параметром /str или заново постройте свой VS-проект.
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Resources.Tools.StronglyTypedResourceBuilder", "4.0.0.0")]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    internal class Resources
    {

        private static global::System.Resources.ResourceManager resourceMan;

        private static global::System.Globalization.CultureInfo resourceCulture;

        [global::System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1811:AvoidUncalledPrivateCode")]
        internal Resources()
        {
        }

        /// <summary>
        ///   Возврат кэшированного экземпляра ResourceManager, используемого этим классом.
        /// </summary>
        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
        internal static global::System.Resources.ResourceManager ResourceManager
        {
            get
            {
                if ((resourceMan == null))
                {
                    global::System.Resources.ResourceManager temp = new global::System.Resources.ResourceManager("UP.Properties.Resources", typeof(Resources).Assembly);
                    resourceMan = temp;
                }
                return resourceMan;
            }
        }

        /// <summary>
        ///   Переопределяет свойство CurrentUICulture текущего потока для всех
        ///   подстановки ресурсов с помощью этого класса ресурсов со строгим типом.
        /// </summary>
        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
        internal static global::System.Globalization.CultureInfo Culture
        {
            get
            {
                return resourceCulture;
            }
            set
            {
                resourceCulture = value;
            }
        }
    }
}
﻿//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace UP.Properties
{


    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "11.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase
    {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default
        {
            get
            {
                return defaultInstance;
            }
        }
    }
}
﻿using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace UP.Services
{
    internal class ApiClient
    {
    }
}
﻿using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json;
using UP.Models;

namespace UP.Services
{
    public class ApiService
    {
        private readonly HttpClient _httpClient;
        private string _baseUrl;
        private string _token;

        public ApiService(string baseUrl = "https://localhost:7197/api/")
        {
            _baseUrl = baseUrl;

            var handler = new HttpClientHandler
            {
                ServerCertificateCustomValidationCallback = (message, cert, chain, errors) => true
            };

            _httpClient = new HttpClient(handler);
            _httpClient.Timeout = TimeSpan.FromSeconds(30);
            _httpClient.DefaultRequestHeaders.Accept.Add(
                new MediaTypeWithQualityHeaderValue("application/json"));
        }

        public void SetToken(string token)
        {
            _token = token;
            _httpClient.DefaultRequestHeaders.Authorization =
                new AuthenticationHeaderValue("Bearer", token);
        }

        public void ClearToken()
        {
            _token = null;
            _httpClient.DefaultRequestHeaders.Authorization = null;
        }

        private async Task<T> HandleResponse<T>(HttpResponseMessage response)
        {
            var content = await response.Content.ReadAsStringAsync();

            if (!response.IsSuccessStatusCode)
            {
                throw new HttpRequestException($"HTTP {response.StatusCode}: {content}");
            }

            if (string.IsNullOrEmpty(content))
            {
                return default(T);
            }

            try
            {
                var settings = new JsonSerializerSettings
                {
                    MissingMemberHandling = MissingMemberHandling.Ignore,
                    NullValueHandling = NullValueHandling.Ignore
                };

                try
                {
                    var simpleAuth = JsonConvert.DeserializeObject<SimpleAuthResponse>(content, settings);
                    if (simpleAuth != null && !string.IsNullOrEmpty(simpleAuth.Token))
                    {
                        if (typeof(T) == typeof(UserData))
                        {
                            var userData = new UserData
                            {
                                Id = simpleAuth.Id,
                                Username = simpleAuth.Username,
                                Email = simpleAuth.Email,
                                Token = simpleAuth.Token
                            };
                            return (T)(object)userData;
                        }
                    }
                }
                catch (JsonException) { }

                try
                {
                    var apiResponse = JsonConvert.DeserializeObject<ApiResponse<T>>(content, settings);
                    if (apiResponse != null && apiResponse.Success)
                    {
                        return apiResponse.Data;
                    }
                }
                catch (JsonException) { }

                return JsonConvert.DeserializeObject<T>(content, settings);
            }
            catch (Exception ex)
            {
                throw new Exception($"Ошибка обработки ответа: {ex.Message}");
            }
        }

        public async Task<UserData> LoginAsync(string username, string password)
        {
            try
            {
                var formData = new MultipartFormDataContent
                {
                    { new StringContent(username), "username" },
                    { new StringContent(password), "password" }
                };

                var response = await _httpClient.PostAsync($"{_baseUrl}Auth/login", formData);

                if (!response.IsSuccessStatusCode)
                {
                    var errorContent = await response.Content.ReadAsStringAsync();
                    throw new HttpRequestException($"Ошибка входа: {response.StatusCode}");
                }

                var userData = await HandleResponse<UserData>(response);

                if (userData != null && !string.IsNullOrEmpty(userData.Token))
                {
                    SetToken(userData.Token);
                }

                return userData;
            }
            catch (Exception ex)
            {
                throw;
            }
        }

        public async Task<UserData> RegisterAsync(string username, string email, string password, List<string> allergies)
        {
            try
            {
                var formData = new MultipartFormDataContent
                {
                    { new StringContent(username), "username" },
                    { new StringContent(email), "email" },
                    { new StringContent(password), "password" }
                };

                if (allergies != null)
                {
                    foreach (var allergy in allergies)
                    {
                        formData.Add(new StringContent(allergy), "allergies");
                    }
                }

                var response = await _httpClient.PostAsync($"{_baseUrl}Auth/register", formData);

                if (!response.IsSuccessStatusCode)
                {
                    var errorContent = await response.Content.ReadAsStringAsync();
                    throw new HttpRequestException($"Ошибка регистрации: {response.StatusCode}");
                }

                return await HandleResponse<UserData>(response);
            }
            catch (Exception ex)
            {
                throw;
            }
        }

        public async Task<List<RecipeDto>> GetRecipesAsync()
        {
            try
            {
                var response = await _httpClient.GetAsync($"{_baseUrl}Recipes");
                return await HandleResponse<List<RecipeDto>>(response);
            }
            catch (Exception ex)
            {
                return new List<RecipeDto>();
            }
        }

        public async Task<RecipeDto> GetRecipeAsync(int id)
        {
            try
            {
                var response = await _httpClient.GetAsync($"{_baseUrl}Recipes/{id}");
                return await HandleResponse<RecipeDto>(response);
            }
            catch (Exception ex)
            {
                throw;
            }
        }

        public async Task<List<RecipeDto>> GetFavoritesAsync()
        {
            try
            {
                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.GetAsync($"{_baseUrl}Recipes/favorites/{userId}");
                return await HandleResponse<List<RecipeDto>>(response);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"GetFavorites error: {ex.Message}");
                return new List<RecipeDto>();
            }
        }

        public async Task<bool> ToggleFavoriteAsync(int recipeId)
        {
            try
            {
                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.PostAsync($"{_baseUrl}Recipes/{recipeId}/favorite/{userId}", null);
                return response.IsSuccessStatusCode;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"ToggleFavorite error: {ex.Message}");
                return false;
            }
        }

        public async Task<MenuDto> GenerateMenuAsync(GenerateMenuRequest request)
        {
            try
            {
                var json = JsonConvert.SerializeObject(request);
                var content = new StringContent(json, Encoding.UTF8, "application/json");

                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.PostAsync($"{_baseUrl}Menu/generate/{userId}", content);

                if (!response.IsSuccessStatusCode)
                {
                    var errorContent = await response.Content.ReadAsStringAsync();
                    throw new HttpRequestException($"Menu generation failed: {response.StatusCode} - {errorContent}");
                }

                return await HandleResponse<MenuDto>(response);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"GenerateMenu error: {ex.Message}");
                throw;
            }
        }

        public async Task<MenuDto> GetCurrentMenuAsync()
        {
            try
            {
                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.GetAsync($"{_baseUrl}Menu/current/{userId}");
                return await HandleResponse<MenuDto>(response);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"GetCurrentMenu error: {ex.Message}");
                return null;
            }
        }

        public async Task<List<MenuDto>> GetMenuHistoryAsync()
        {
            try
            {
                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.GetAsync($"{_baseUrl}Menu/history/{userId}");
                return await HandleResponse<List<MenuDto>>(response);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"GetMenuHistory error: {ex.Message}");
                return new List<MenuDto>();
            }
        }

        public async Task<ShoppingListDto> GetCurrentShoppingListAsync()
        {
            try
            {
                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.GetAsync($"{_baseUrl}ShoppingList/current/{userId}");
                return await HandleResponse<ShoppingListDto>(response);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"GetCurrentShoppingList error: {ex.Message}");
                return null;
            }
        }


        public async Task<bool> GenerateShoppingListAsync(int menuId)
        {
            try
            {
                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.PostAsync($"{_baseUrl}ShoppingList/generate-from-menu/{menuId}/{userId}", null);
                return response.IsSuccessStatusCode;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"GenerateShoppingList error: {ex.Message}");
                return false;
            }
        }

        public async Task<bool> ToggleShoppingItemAsync(int listId, int itemId, bool isPurchased)
        {
            try
            {
                var formData = new MultipartFormDataContent
        {
            { new StringContent(isPurchased.ToString()), "isPurchased" }
        };

                var response = await _httpClient.PostAsync($"{_baseUrl}ShoppingList/{listId}/items/{itemId}/toggle", formData);
                return response.IsSuccessStatusCode;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"ToggleShoppingItem error: {ex.Message}");
                return false;
            }
        }

        public async Task<List<RecipeDto>> SearchRecipesAsync(string query, List<string> tags = null, int? maxTime = null)
        {
            try
            {
                var url = $"{_baseUrl}Recipes/search?query={Uri.EscapeDataString(query ?? "")}";

                if (tags != null && tags.Count > 0)
                {
                    url += $"&tags={string.Join(",", tags)}";
                }

                if (maxTime.HasValue)
                {
                    url += $"&maxTime={maxTime.Value}";
                }

                var response = await _httpClient.GetAsync(url);
                return await HandleResponse<List<RecipeDto>>(response);
            }
            catch (Exception ex)
            {
                return new List<RecipeDto>();
            }
        }
        public async Task CheckAvailableEndpoints()
        {
            try
            {
                var endpoints = new[]
                {
            $"{_baseUrl}Menu/generate",
            $"{_baseUrl}Menu",
            $"{_baseUrl}Menu/create",
            $"{_baseUrl}Menu/plan",
            $"{_baseUrl}MenuPlans",
            $"{_baseUrl}MenuPlan"
        };

                foreach (var endpoint in endpoints)
                {
                    try
                    {
                        var response = await _httpClient.GetAsync(endpoint);
                        Console.WriteLine($"Endpoint {endpoint}: {response.StatusCode}");
                    }
                    catch (Exception ex)
                    {
                        Console.WriteLine($"Endpoint {endpoint}: Error - {ex.Message}");
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Check endpoints error: {ex.Message}");
            }
        }

        public async Task<List<IngredientDto>> GetIngredientsAsync()
        {
            try
            {
                var response = await _httpClient.GetAsync($"{_baseUrl}Recipes/ingredients");
                return await HandleResponse<List<IngredientDto>>(response);
            }
            catch (Exception ex)
            {
                Console.WriteLine($"GetIngredients error: {ex.Message}");
                return new List<IngredientDto>();
            }
        }

        public async Task<bool> AddToInventoryAsync(int ingredientId, decimal quantity, string unit)
        {
            try
            {
                var formData = new MultipartFormDataContent
        {
            { new StringContent(ingredientId.ToString()), "ingredientId" },
            { new StringContent(quantity.ToString()), "quantity" },
            { new StringContent(unit), "unit" }
        };

                var userId = AppData.CurrentUser?.Id ?? 0;
                var response = await _httpClient.PostAsync($"{_baseUrl}Inventory/add/{userId}", formData);
                return response.IsSuccessStatusCode;
            }
            catch (Exception ex)
            {
                Console.WriteLine($"AddToInventory error: {ex.Message}");
                return false;
            }
        }
    }
}﻿//using System;
//using System.Collections.Generic;
//using MySql.Data.MySqlClient;
//using Newtonsoft.Json;

//namespace UP.Services
//{
//    public class DatabaseServiceMySQL
//    {
//        private readonly string _connectionString;

//        public DatabaseServiceMySQL(string server = "localhost", string database = "recipes_db", string user = "root", string password = "root")
//        {
//            _connectionString = $"Server={server};Database={database};Uid={user};Pwd={password};Charset=utf8mb4;";
//            InitializeDatabase();
//        }

//        private void InitializeDatabase()
//        {
//            var conn = new MySqlConnection(_connectionString);
//            conn.Open();

//            var cmd = conn.CreateCommand();
//            cmd.CommandText = @"
//                CREATE TABLE IF NOT EXISTS recipes (
//                    id VARCHAR(36) PRIMARY KEY,
//                    title VARCHAR(255) NOT NULL,
//                    ingredients_json TEXT,
//                    steps_json TEXT,
//                    tags_json TEXT,
//                    calories INT DEFAULT 0,
//                    photo_path VARCHAR(255)
//                );

//                CREATE TABLE IF NOT EXISTS ingredients (
//                    id VARCHAR(36) PRIMARY KEY,
//                    name VARCHAR(255) NOT NULL,
//                    category VARCHAR(100),
//                    allergens_json TEXT
//                );

//                CREATE TABLE IF NOT EXISTS menus (
//                    id VARCHAR(36) PRIMARY KEY,
//                    user_id VARCHAR(36),
//                    created_at DATETIME,
//                    menu_json TEXT
//                );

//                CREATE TABLE IF NOT EXISTS favorites (
//                    recipe_id VARCHAR(36) PRIMARY KEY,
//                    added_at DATETIME
//                );
//            ";
//            cmd.ExecuteNonQuery();
//        }

//        private MySqlConnection GetConnection()
//        {
//            var conn = new MySqlConnection(_connectionString);
//            conn.Open();
//            return conn;
//        }

//        // Добавление или обновление рецепта
//        public void InsertOrUpdateRecipe(string id, string title, string ingredientsJson, string stepsJson, string tagsJson, int calories = 0, string photoPath = null)
//        {
//            var conn = GetConnection();
//            var cmd = conn.CreateCommand();
//            cmd.CommandText = @"
//                INSERT INTO recipes (id, title, ingredients_json, steps_json, tags_json, calories, photo_path)
//                VALUES (@id, @title, @ingredients_json, @steps_json, @tags_json, @calories, @photo_path)
//                ON DUPLICATE KEY UPDATE
//                    title = VALUES(title),
//                    ingredients_json = VALUES(ingredients_json),
//                    steps_json = VALUES(steps_json),
//                    tags_json = VALUES(tags_json),
//                    calories = VALUES(calories),
//                    photo_path = VALUES(photo_path);
//            ";
//            cmd.Parameters.AddWithValue("@id", id);
//            cmd.Parameters.AddWithValue("@title", title);
//            cmd.Parameters.AddWithValue("@ingredients_json", ingredientsJson ?? "");
//            cmd.Parameters.AddWithValue("@steps_json", stepsJson ?? "");
//            cmd.Parameters.AddWithValue("@tags_json", tagsJson ?? "");
//            cmd.Parameters.AddWithValue("@calories", calories);
//            cmd.Parameters.AddWithValue("@photo_path", photoPath ?? "");
//            cmd.ExecuteNonQuery();
//        }

//        public IEnumerable<(string id, string title, string ingredientsJson, string stepsJson, string tagsJson, int calories, string photo)> GetAllRecipes()
//        {
//            var conn = GetConnection();
//            var cmd = conn.CreateCommand();
//            cmd.CommandText = "SELECT id, title, ingredients_json, steps_json, tags_json, calories, photo_path FROM recipes ORDER BY title;";
//            var reader = cmd.ExecuteReader();

//            while (reader.Read())
//            {
//                yield return (
//                    reader.GetString("id"),
//                    reader.GetString("title"),
//                    reader.IsDBNull("ingredients_json") ? "" : reader.GetString("ingredients_json"),
//                    reader.IsDBNull("steps_json") ? "" : reader.GetString("steps_json"),
//                    reader.IsDBNull("tags_json") ? "" : reader.GetString("tags_json"),
//                    reader.IsDBNull("calories") ? 0 : reader.GetInt32("calories"),
//                    reader.IsDBNull("photo_path") ? "" : reader.GetString("photo_path")
//                );
//            }
//        }

//        public void SaveMenu(string id, string userId, string menuJson)
//        {
//            var conn = GetConnection();
//            var cmd = conn.CreateCommand();
//            cmd.CommandText = @"
//                INSERT INTO menus (id, user_id, created_at, menu_json)
//                VALUES (@id, @user_id, @created_at, @menu_json)
//                ON DUPLICATE KEY UPDATE
//                    menu_json = VALUES(menu_json),
//                    created_at = VALUES(created_at);
//            ";
//            cmd.Parameters.AddWithValue("@id", id);
//            cmd.Parameters.AddWithValue("@user_id", userId ?? "");
//            cmd.Parameters.AddWithValue("@created_at", DateTime.UtcNow);
//            cmd.Parameters.AddWithValue("@menu_json", menuJson ?? "");
//            cmd.ExecuteNonQuery();
//        }

//        public void AddFavorite(string recipeId)
//        {
//            var conn = GetConnection();
//            var cmd = conn.CreateCommand();
//            cmd.CommandText = "INSERT INTO favorites (recipe_id, added_at) VALUES (@id, @added_at) ON DUPLICATE KEY UPDATE added_at = VALUES(added_at);";
//            cmd.Parameters.AddWithValue("@id", recipeId);
//            cmd.Parameters.AddWithValue("@added_at", DateTime.UtcNow);
//            cmd.ExecuteNonQuery();
//        }

//        public void RemoveFavorite(string recipeId)
//        {
//            var conn = GetConnection();
//            var cmd = conn.CreateCommand();
//            cmd.CommandText = "DELETE FROM favorites WHERE recipe_id = @id;";
//            cmd.Parameters.AddWithValue("@id", recipeId);
//            cmd.ExecuteNonQuery();
//        }

//        public bool IsFavorite(string recipeId)
//        {
//            var conn = GetConnection();
//            var cmd = conn.CreateCommand();
//            cmd.CommandText = "SELECT 1 FROM favorites WHERE recipe_id = @id LIMIT 1;";
//            cmd.Parameters.AddWithValue("@id", recipeId);
//                var reader = cmd.ExecuteReader();
//            return reader.Read();
//        }
//    }
//}
